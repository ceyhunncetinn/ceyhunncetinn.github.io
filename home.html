<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>CEYHUN PRO â€¢ Drop Analyzer Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --bg-main: #020617;
            --bg-card: #020617;
            --accent: #22c55e;
            --accent-soft: rgba(34, 197, 94, 0.1);
            --accent-2: #38bdf8;
            --text-main: #f9fafb;
            --text-muted: #9ca3af;
            --border-subtle: #1f2937;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: radial-gradient(circle at top, #0f172a 0, #020617 55%, #020617 100%);
            color: var(--text-main);
        }

        .layout {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* Sidebar */
        .sidebar {
            width: 270px;
            background: #020617;
            border-right: 1px solid var(--border-subtle);
            padding: 20px 18px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .logo-box {
            padding: 10px 12px;
            border-radius: 16px;
            background: radial-gradient(circle at top left, rgba(34, 197, 94, 0.25), transparent 55%);
            border: 1px solid rgba(34, 197, 94, 0.35);
        }

        .logo-title {
            font-size: 14px;
            letter-spacing: 0.12em;
            color: var(--accent);
            font-weight: 600;
            text-transform: uppercase;
        }

        .logo-sub {
            font-size: 11px;
            color: var(--text-muted);
        }

        .section-label {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.18em;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .nav-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .nav-btn {
            all: unset;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            border-radius: 999px;
            cursor: pointer;
            font-size: 13px;
            color: var(--text-muted);
            transition: 0.15s ease;
        }

        .nav-btn span.icon {
            width: 26px;
            height: 26px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.3);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .nav-btn.active {
            background: radial-gradient(circle at left, rgba(34, 197, 94, 0.28), transparent 60%);
            color: var(--text-main);
        }

        .nav-btn.active span.icon {
            border-color: rgba(34, 197, 94, 0.7);
        }

        .pill {
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.4);
            color: var(--text-muted);
            margin-left: auto;
        }

        .sidebar-footer {
            margin-top: auto;
            font-size: 11px;
            color: var(--text-muted);
            border-top: 1px dashed rgba(55, 65, 81, 0.8);
            padding-top: 10px;
        }

        .ai-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 999px;
            border: 1px solid rgba(56, 189, 248, 0.7);
            color: #e0f2fe;
            background: rgba(8, 47, 73, 0.8);
            margin-top: 4px;
        }

        /* Main content */
        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 16px 18px 18px;
            overflow: hidden;
        }

        .main-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            margin-bottom: 14px;
        }

        .title-block h1 {
            font-size: 18px;
            margin: 0;
        }

        .title-block p {
            margin: 2px 0 0;
            font-size: 12px;
            color: var(--text-muted);
        }

        .chip-row {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .chip {
            font-size: 11px;
            border-radius: 999px;
            padding: 3px 10px;
            border: 1px solid rgba(148, 163, 184, 0.4);
            color: var(--text-muted);
        }

        .chip.green {
            border-color: rgba(34,197,94,0.6);
            color: #bbf7d0;
            background: rgba(21, 128, 61, 0.25);
        }

        .chip.blue {
            border-color: rgba(56,189,248,0.7);
            color: #e0f2fe;
            background: rgba(8,47,73,0.8);
        }

        .content-scroll {
            flex: 1;
            overflow-y: auto;
            padding-right: 4px;
        }

        /* Panels */
        .panel {
            display: none;
            animation: fadeIn 0.2s ease-out;
        }
        .panel.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(4px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Layout + cards */
        .grid-2 {
            display: grid;
            grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
            gap: 14px;
        }

        .card {
            background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.95), #020617 70%);
            border-radius: 18px;
            border: 1px solid rgba(31, 41, 55, 0.95);
            padding: 14px 14px 12px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .card-title {
            font-size: 13px;
            font-weight: 600;
        }

        .card-sub {
            font-size: 11px;
            color: var(--text-muted);
        }

        .badge-soft {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(148, 163, 184, 0.4);
            color: var(--text-muted);
        }

        .badge-soft.green {
            border-color: rgba(34,197,94,0.6);
            color: #bbf7d0;
        }

        .badge-soft.blue {
            border-color: rgba(56,189,248,0.8);
            color: #e0f2fe;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 8px;
            margin-bottom: 10px;
        }

        label {
            display: block;
            font-size: 11px;
            color: var(--text-muted);
            margin-bottom: 2px;
        }

        input, select, textarea {
            width: 100%;
            padding: 7px 9px;
            font-size: 12px;
            border-radius: 10px;
            border: 1px solid rgba(55, 65, 81, 0.9);
            background: rgba(15, 23, 42, 0.9);
            color: var(--text-main);
            outline: none;
        }

        input:focus, select:focus, textarea:focus {
            border-color: rgba(34, 197, 94, 0.8);
            box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.3);
        }

        textarea {
            resize: vertical;
            min-height: 70px;
        }

        .btn {
            all: unset;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 7px 12px;
            border-radius: 999px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            margin-top: 4px;
        }

        .btn-primary {
            background: linear-gradient(to right, #22c55e, #22c55e);
            color: #022c22;
        }

        .btn-outline {
            border: 1px solid rgba(148, 163, 184, 0.6);
            color: var(--text-muted);
        }

        .btn-icon { font-size: 13px; }

        .metrics-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            gap: 8px;
            margin-top: 10px;
        }

        .metric {
            padding: 8px 9px;
            border-radius: 12px;
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid rgba(31, 41, 55, 0.95);
        }

        .metric-label {
            font-size: 11px;
            color: var(--text-muted);
        }

        .metric-value {
            font-size: 14px;
            font-weight: 600;
            margin-top: 2px;
        }

        .metric-pill {
            font-size: 10px;
            margin-top: 4px;
            display: inline-block;
            padding: 1px 7px;
            border-radius: 999px;
        }

        .metric-pill.green {
            background: rgba(34,197,94,0.15);
            color: #bbf7d0;
        }

        .metric-pill.red {
            background: rgba(248, 113, 113, 0.12);
            color: #fecaca;
        }

        .metric-pill.yellow {
            background: rgba(250, 204, 21, 0.14);
            color: #fef9c3;
        }

        .analysis-box {
            margin-top: 8px;
            padding: 8px 9px;
            border-radius: 12px;
            border: 1px dashed rgba(75, 85, 99, 0.9);
            background: radial-gradient(circle at top left, rgba(8, 47, 73, 0.8), rgba(15, 23, 42, 0.96));
            font-size: 12px;
            color: #e5e7eb;
            white-space: pre-line;
        }

        .analysis-header {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.16em;
            color: #bae6fd;
            margin-bottom: 4px;
        }

        .tag-row {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 6px;
        }

        .tag {
            font-size: 10px;
            padding: 2px 7px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.55);
            color: var(--text-muted);
        }

        .tag.green {
            border-color: rgba(34,197,94,0.7);
            color: #bbf7d0;
        }

        .tag.red {
            border-color: rgba(248,113,113,0.7);
            color: #fecaca;
        }

        .tag.yellow {
            border-color: rgba(250,204,21,0.7);
            color: #fef9c3;
        }

        .list-compact {
            font-size: 12px;
            padding-left: 16px;
            margin: 4px 0;
        }

        .list-compact li { margin-bottom: 2px; }

        .trend-bar {
            width: 100%;
            height: 8px;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.95);
            overflow: hidden;
            margin-top: 6px;
        }

        .trend-bar-fill {
            height: 100%;
            border-radius: 999px;
            background: linear-gradient(to right, #22c55e, #38bdf8);
            width: 0%;
            transition: width 0.25s ease-out;
        }

        .small-note {
            font-size: 10px;
            color: var(--text-muted);
            margin-top: 6px;
        }

        @media (max-width: 900px) {
            .layout { flex-direction: column; }
            .sidebar {
                width: 100%;
                flex-direction: row;
                overflow-x: auto;
                height: auto;
                border-right: none;
                border-bottom: 1px solid var(--border-subtle);
                white-space: nowrap;
            }
            .logo-box { min-width: 200px; flex-shrink: 0; }
            .nav-group { flex-direction: row; flex-wrap: nowrap; }
            .nav-btn { min-width: 220px; flex-shrink: 0; }
            .main { padding: 10px 12px 14px; }
            .main-header { flex-direction: column; align-items: flex-start; }
            .grid-2 { grid-template-columns: 1fr; }
        }

        @media (max-width: 820px) {
            .grid-2 { grid-template-columns: 1fr !important; }
        }
    </style>
</head>
<body>
<div class="layout">
    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="logo-box">
            <div class="logo-title">CEYHUN PRO â€¢ DROP ANALYZER</div>
            <div class="logo-sub">Ãœcretsiz akÄ±llÄ± Ã¼rÃ¼n analizi â€¢ GitHub Pages</div>
        </div>

        <div>
            <div class="section-label">ModÃ¼ller</div>
            <div class="nav-group">
                <button class="nav-btn active" data-target="panel-drop">
                    <span class="icon">ğŸ“Š</span>
                    Drop Analyzer
                    <span class="pill">Manual analiz</span>
                </button>
                <button class="nav-btn" data-target="panel-linkai">
                    <span class="icon">ğŸ§ </span>
                    Link Mini AI
                    <span class="pill">URL â†’ tahmin</span>
                </button>
                <button class="nav-btn" data-target="panel-finder">
                    <span class="icon">ğŸ”</span>
                    Product Finder
                    <span class="pill">ÃœrÃ¼n bulucu</span>
                </button>
                <button class="nav-btn" data-target="panel-profit">
                    <span class="icon">ğŸ’¸</span>
                    Profit Calculator
                    <span class="pill">KÃ¢r hesapla</span>
                </button>
                <button class="nav-btn" data-target="panel-trend">
                    <span class="icon">ğŸ“ˆ</span>
                    Trend Explorer
                    <span class="pill">Trend analizi</span>
                </button>
                <button class="nav-btn" data-target="panel-competitor">
                    <span class="icon">ğŸª</span>
                    Rakip MaÄŸaza Analizi
                    <span class="pill">Rakip analiz</span>
                </button>
                <button class="nav-btn" data-target="panel-seo">
                    <span class="icon">ğŸ“</span>
                    eBay SEO Optimizer
                    <span class="pill">BaÅŸlÄ±k & SEO</span>
                </button>
                <button class="nav-btn" id="ai-toggle-btn" onclick="toggleAI()">
                    <span class="icon">ğŸ¤–</span>
                    AI Mode
                    <span class="pill" id="ai-indicator">KapalÄ±</span>
                </button>
            </div>
        </div>

        <div class="sidebar-footer">
            <div>Analiz modu: <strong>Ãœcretsiz Local Motor</strong></div>
            <div class="small-note">
                TÃ¼m hesaplamalar tarayÄ±cÄ± iÃ§inde Ã§alÄ±ÅŸÄ±r.  
                Ä°stersen ileride OpenAI API key ekleyip gerÃ§ek ChatGPT entegrasyonu yapabilirsin.
            </div>
            <div class="ai-badge">
                ğŸ¤– AI Ready
                <span>Key eklenebilir</span>
            </div>
        </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
        <div class="main-header">
            <div class="title-block">
                <h1>Drop Analyzer Dashboard</h1>
                <p>eBay dropshipping iÃ§in yapay zekÃ¢ tadÄ±nda, tamamen Ã¼cretsiz analiz paneli.</p>
            </div>
            <div class="chip-row">
                <div class="chip green">Ãœcretsiz â€¢ Local analiz</div>
                <div class="chip blue">AI Ready â€¢ OpenAI key ile geniÅŸler</div>
            </div>
        </div>

        <div class="content-scroll">
            <!-- DROP ANALYZER (MANUAL) -->
            <section class="panel active" id="panel-drop">
                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Drop Analyzer (Manual)</div>
                                <div class="card-sub">ÃœrÃ¼n detayÄ±nÄ± gir â†’ kÃ¢r, marj, skor, yorum al.</div>
                            </div>
                            <span class="badge-soft green">DetaylÄ± Analiz</span>
                        </div>

                        <div class="form-row">
                            <div>
                                <label>ÃœrÃ¼n BaÅŸlÄ±ÄŸÄ±</label>
                                <textarea id="da-title" placeholder="Ã–rn: Stainless Steel Kitchen Organizer Rack, 3 Tier"></textarea>
                            </div>
                        </div>

                        <div class="form-row">
                            <div>
                                <label>TedarikÃ§i AlÄ±ÅŸ FiyatÄ± (Â£)</label>
                                <input id="da-cost" type="number" step="0.01" placeholder="Ã–rn: 8.50">
                            </div>
                            <div>
                                <label>eBay SatÄ±ÅŸ FiyatÄ± (Â£)</label>
                                <input id="da-sell" type="number" step="0.01" placeholder="Ã–rn: 16.99">
                            </div>
                            <div>
                                <label>AylÄ±k Tahmini SatÄ±ÅŸ Adedi</label>
                                <input id="da-sales" type="number" step="1" placeholder="Ã–rn: 25">
                            </div>
                            <div>
                                <label>Rekabet Seviyesi</label>
                                <select id="da-competition">
                                    <option value="medium">Orta</option>
                                    <option value="low">DÃ¼ÅŸÃ¼k</option>
                                    <option value="high">YÃ¼ksek</option>
                                </select>
                            </div>
                        </div>

                        <button class="btn btn-primary" onclick="runDropAnalyzer()">
                            <span class="btn-icon">âš¡</span>
                            ÃœrÃ¼nÃ¼ Analiz Et
                        </button>

                        <button class="btn btn-outline" onclick="autoCategoryAI()">
                            ğŸ§  Auto Category
                        </button>

                        <div id="auto-cat-result" class="analysis-box" style="display:none; margin-top:10px;">
                            <div class="analysis-header">Kategori Tahmini</div>
                            <div id="auto-cat-text"></div>
                        </div>

                        <div class="small-note">
                            Bu mod, elinde net fiyatlar olduÄŸunda en detaylÄ± sonucu verir.  
                            Sadece URL ile hÄ±zlÄ± tahmin istiyorsan <strong>Link Mini AI</strong> sekmesini kullan.
                        </div>

                        <div class="metrics-row" id="da-metrics" style="display:none;">
                            <div class="metric">
                                <div class="metric-label">KÃ¢r (adet baÅŸÄ±)</div>
                                <div class="metric-value" id="da-profit"></div>
                                <span class="metric-pill green" id="da-profit-tag"></span>
                            </div>
                            <div class="metric">
                                <div class="metric-label">KÃ¢r MarjÄ±</div>
                                <div class="metric-value" id="da-margin"></div>
                                <span class="metric-pill yellow" id="da-margin-tag"></span>
                            </div>
                            <div class="metric">
                                <div class="metric-label">AylÄ±k Tahmini KÃ¢r</div>
                                <div class="metric-value" id="da-monthly"></div>
                            </div>
                            <div class="metric">
                                <div class="metric-label">Genel Drop Skoru</div>
                                <div class="metric-value" id="da-score"></div>
                                <span class="metric-pill" id="da-score-tag"></span>
                            </div>
                        </div>

                        <div class="analysis-box" id="da-analysis" style="display:none; margin-top:10px;">
                            <div class="analysis-header">AkÄ±llÄ± Yorum</div>
                            <div id="da-analysis-text"></div>
                            <div class="tag-row" id="da-tags"></div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">KÄ±sa Yol Rehberi</div>
                                <div class="card-sub">Bu panel, Ã¼rÃ¼nÃ¼n girmeye deÄŸer olup olmadÄ±ÄŸÄ±nÄ± hÄ±zlÄ±ca sÃ¶ylemek iÃ§in tasarlandÄ±.</div>
                            </div>
                            <span class="badge-soft">Rehber</span>
                        </div>
                        <ul class="list-compact">
                            <li>KÃ¢r marjÄ± %25+ â†’ gÃ¼zel.</li>
                            <li>AylÄ±k satÄ±ÅŸ 15+ & rekabet dÃ¼ÅŸÃ¼k/orta â†’ girmeye deÄŸer.</li>
                            <li>Skor 70+ â†’ â€œTest etâ€ seviyesi.</li>
                            <li>Skor 80+ â†’ â€œMaÄŸazaya ekle, fiyatÄ± optimize etâ€ seviyesi.</li>
                        </ul>
                        <div class="analysis-box" style="margin-top:10px;">
                            <div class="analysis-header">Ä°pucu</div>
                            â€¢ Ev & Mutfak, Pet, Hobi kategorileri genelde dropshipping iÃ§in daha stabil.  
                            â€¢ Elektronik Ã¼rÃ¼nlerde iade riski daha yÃ¼ksek.  
                            â€¢ â€œSet / Bundleâ€ (2â€™li, 3â€™lÃ¼) Ã¼rÃ¼nler genelde daha iyi kÃ¢r bÄ±rakÄ±r.
                        </div>
                    </div>
                </div>
            </section>

            <!-- LINK MINI AI (URL â†’ tahmini analiz) -->
            <section class="panel" id="panel-linkai">
                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Link Mini AI Analyzer</div>
                                <div class="card-sub">Sadece eBay linki ver â†’ tahmini fiyat, kÃ¢r, trend, skor al.</div>
                            </div>
                            <span class="badge-soft blue">Ãœcretsiz Mini AI</span>
                        </div>

                        <div class="form-row">
                            <div>
                                <label>eBay ÃœrÃ¼n Linki</label>
                                <input id="la-link" placeholder="https://www.ebay.co.uk/itm/XXXXXXXX">
                            </div>
                        </div>

                        <button class="btn btn-primary" onclick="runLinkMiniAI()">
                            ğŸ§  Mini AI Analiz Ã‡alÄ±ÅŸtÄ±r
                        </button>

                        <div class="small-note">
                            Bu mod: sadece URLâ€™den <strongt>tahmini</strong> analiz yapar.  
                            GerÃ§ek satÄ±cÄ± fiyatÄ±nÄ± scrape etmez, data saklamaz, tamamen local kural motoru ile Ã§alÄ±ÅŸÄ±r.
                        </div>

                        <div id="la-result" style="margin-top:10px;"></div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Mini AI NasÄ±l Ã‡alÄ±ÅŸÄ±yor?</div>
                                <div class="card-sub">URL iÃ§indeki kelimeleri Ã§Ã¶zÃ¼mleyip niÅŸ ve fiyatÄ± tahmin eder.</div>
                            </div>
                        </div>
                        <ul class="list-compact">
                            <li>Linkten domain (ebay.co.uk, .com, vb) okunur.</li>
                            <li>URL path iÃ§indeki slug kelimeleri (stainless-steel-kitchen-rack gibi) analiz edilir.</li>
                            <li>Pet, kitchen, car, phone, toy gibi kelimelerden kategori tahmin edilir.</li>
                            <li>Kategoriye gÃ¶re tahmini fiyat ve kÃ¢r aralÄ±ÄŸÄ± hesaplanÄ±r.</li>
                            <li>NiÅŸ + fiyat + rekabete gÃ¶re trend & drop skoru Ã§Ä±kartÄ±lÄ±r.</li>
                        </ul>
                        <div class="analysis-box">
                            <div class="analysis-header">Ã–nemli Not</div>
                            Bu sonuÃ§lar, gerÃ§ek satÄ±ÅŸ datasÄ± deÄŸil;  
                            Ceyhun Pro iÃ§in yazÄ±lmÄ±ÅŸ tahmini bir â€œyapay zekÃ¢ tahmin motoruâ€dur.  
                            HÄ±zlÄ± ilk eleme iÃ§in uygundur; detay iÃ§in manuel Drop Analyzer kullan.
                        </div>
                    </div>
                </div>
            </section>

            <!-- PRODUCT FINDER -->
            <section class="panel" id="panel-finder">
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">Product Finder</div>
                            <div class="card-sub">Anahtar kelimeye gÃ¶re mantÄ±klÄ± Ã¼rÃ¼n fikirleri ve mini analiz.</div>
                        </div>
                        <span class="badge-soft blue">AkÄ±llÄ± Ã¶neri</span>
                    </div>

                    <div class="form-row">
                        <div>
                            <label>Hedef Anahtar Kelime / Kategori</label>
                            <input id="pf-keyword" placeholder="Ã–rn: kitchen organizer, pet grooming, car accessories">
                        </div>
                        <div>
                            <label>Minimum SatÄ±ÅŸ FiyatÄ± (Â£)</label>
                            <input id="pf-min" type="number" step="0.1" placeholder="Ã–rn: 10">
                        </div>
                        <div>
                            <label>Maksimum SatÄ±ÅŸ FiyatÄ± (Â£)</label>
                            <input id="pf-max" type="number" step="0.1" placeholder="Ã–rn: 35">
                        </div>
                    </div>

                    <button class="btn btn-primary" onclick="runProductFinder()">
                        <span class="btn-icon">ğŸ”</span>
                        ÃœrÃ¼n Fikirleri Ãœret
                    </button>

                    <div class="small-note">
                        Bu araÃ§ eBay'den canlÄ± veri Ã§ekmez; ama dropshipping mantÄ±ÄŸÄ±na gÃ¶re akÄ±llÄ±, filtrelenmiÅŸ Ã¼rÃ¼n fikirleri Ã¼retir.
                    </div>

                    <div id="pf-results" style="margin-top:10px;"></div>
                </div>
            </section>

            <!-- PROFIT CALCULATOR -->
            <section class="panel" id="panel-profit">
                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Profit Calculator</div>
                                <div class="card-sub">eBay & Ã¶deme kesintileri dahil net kÃ¢rÄ±nÄ± hesapla.</div>
                            </div>
                            <span class="badge-soft green">KÃ¢r HesaplayÄ±cÄ±</span>
                        </div>

                        <div class="form-row">
                            <div>
                                <label>TedarikÃ§i AlÄ±ÅŸ FiyatÄ± (Â£)</label>
                                <input id="pc-cost" type="number" step="0.01" placeholder="Ã–rn: 8.50">
                            </div>
                            <div>
                                <label>eBay SatÄ±ÅŸ FiyatÄ± (Â£)</label>
                                <input id="pc-sell" type="number" step="0.01" placeholder="Ã–rn: 18.99">
                            </div>
                        </div>

                        <div class="form-row">
                            <div>
                                <label>Kargo Maliyeti (senin Ã¶dediÄŸin) (Â£)</label>
                                <input id="pc-ship" type="number" step="0.01" placeholder="Ã–rn: 2.50">
                            </div>
                            <div>
                                <label>eBay Komisyonu (%)</label>
                                <input id="pc-ebay" type="number" step="0.1" placeholder="Ã–rn: 13">
                            </div>
                            <div>
                                <label>Ã–deme Komisyonu (Payoneer vb) (%)</label>
                                <input id="pc-pay" type="number" step="0.1" placeholder="Ã–rn: 2">
                            </div>
                        </div>

                        <button class="btn btn-primary" onclick="runProfitCalc()">
                            <span class="btn-icon">ğŸ’¸</span>
                            KÃ¢rÄ± Hesapla
                        </button>

                        <div class="metrics-row" id="pc-metrics" style="display:none; margin-top:10px;">
                            <div class="metric">
                                <div class="metric-label">Toplam Maliyet</div>
                                <div class="metric-value" id="pc-total-cost"></div>
                            </div>
                            <div class="metric">
                                <div class="metric-label">Net KÃ¢r (adet)</div>
                                <div class="metric-value" id="pc-profit"></div>
                                <span class="metric-pill" id="pc-profit-tag"></span>
                            </div>
                            <div class="metric">
                                <div class="metric-label">KÃ¢r MarjÄ±</div>
                                <div class="metric-value" id="pc-margin"></div>
                                <span class="metric-pill" id="pc-margin-tag"></span>
                            </div>
                        </div>

                        <div class="analysis-box" id="pc-analysis" style="display:none;">
                            <div class="analysis-header">AkÄ±llÄ± Yorum</div>
                            <div id="pc-analysis-text"></div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Basit Strateji</div>
                                <div class="card-sub">KÃ¢r marjlarÄ±na gÃ¶re hÄ±zlÄ± aksiyon.</div>
                            </div>
                        </div>
                        <ul class="list-compact">
                            <li>%0â€“10 â†’ ZayÄ±f, fiyat / tedarikÃ§i gÃ¶zden geÃ§ir.</li>
                            <li>%10â€“20 â†’ Orta, sadece trend / hÄ±zlÄ± satan Ã¼rÃ¼nlerde mantÄ±klÄ±.</li>
                            <li>%20â€“30 â†’ GÃ¼zel, Ã§oÄŸu Ã¼rÃ¼n iÃ§in makul seviye.</li>
                            <li>%30+ â†’ Ã‡ok iyi, rekabet uygunsa direkt listele.</li>
                        </ul>
                        <div class="analysis-box" style="margin-top:10px;">
                            <div class="analysis-header">Not</div>
                            Uzun vadede maÄŸazayÄ± bÃ¼yÃ¼tmek iÃ§in:
                            â€¢ BazÄ± Ã¼rÃ¼nlerde kÃ¢rÄ± dÃ¼ÅŸÃ¼k tutup trafik Ã§ekebilirsin.  
                            â€¢ KÃ¢rÄ± yÃ¼ksek Ã¼rÃ¼nleri â€œupsellâ€ olarak kullanabilirsin.
                        </div>
                    </div>
                </div>
            </section>

            <!-- TREND EXPLORER -->
            <section class="panel" id="panel-trend">
                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Trend Explorer</div>
                                <div class="card-sub">Kategoriye gÃ¶re basit ama akÄ±llÄ± trend skoru.</div>
                            </div>
                            <span class="badge-soft blue">Mini Trend Motoru</span>
                        </div>

                        <div class="form-row">
                            <div>
                                <label>Kategori / Anahtar Kelime</label>
                                <input id="te-keyword" placeholder="Ã–rn: pet grooming, home office, gym accessories">
                            </div>
                            <div>
                                <label>Zaman Ufku</label>
                                <select id="te-horizon">
                                    <option value="30">Son 30 gÃ¼n</option>
                                    <option value="90">Son 90 gÃ¼n</option>
                                    <option value="365">Son 12 ay</option>
                                </select>
                            </div>
                        </div>

                        <button class="btn btn-primary" onclick="runTrendExplorer()">
                            <span class="btn-icon">ğŸ“ˆ</span>
                            Trend Analizi Ã‡alÄ±ÅŸtÄ±r
                        </button>

                        <div class="metrics-row" id="te-metrics" style="display:none; margin-top:10px;">
                            <div class="metric">
                                <div class="metric-label">Trend Skoru</div>
                                <div class="metric-value" id="te-score"></div>
                                <span class="metric-pill" id="te-score-tag"></span>
                            </div>
                            <div class="metric">
                                <div class="metric-label">Risk Seviyesi</div>
                                <div class="metric-value" id="te-risk"></div>
                            </div>
                        </div>

                        <div class="trend-bar" style="margin-top:10px;">
                            <div class="trend-bar-fill" id="te-bar"></div>
                        </div>

                        <div class="analysis-box" id="te-analysis" style="display:none; margin-top:10px%;">
                            <div class="analysis-header">Trend Yorumu</div>
                            <div id="te-analysis-text"></div>
                            <div class="tag-row" id="te-tags"></div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Trend Okuma MantÄ±ÄŸÄ±</div>
                                <div class="card-sub">GerÃ§ek data ile API baÄŸladÄ±ÄŸÄ±nda da aynÄ± mantÄ±ÄŸÄ± kullanabilirsin.</div>
                            </div>
                        </div>
                        <ul class="list-compact">
                            <li>Skor 0â€“40 â†’ DÃ¼ÅŸÃ¼k ilgi.</li>
                            <li>Skor 40â€“70 â†’ Orta seviye, test edilebilir.</li>
                            <li>Skor 70+ â†’ GÃ¼Ã§lÃ¼ trend, koleksiyon oluÅŸturulabilir.</li>
                        </ul>
                        <div class="analysis-box" style="margin-top:10px;">
                            <div class="analysis-header">Ä°pucu</div>
                            AynÄ± niÅŸte 5â€“10 Ã¼rÃ¼n ekleyerek maÄŸazada bir â€œblokâ€ oluÅŸturursan  
                            cross-sell ve gÃ¼ven artar.
                        </div>
                    </div>
                </div>
            </section>

            <!-- RAKÄ°P MAÄAZA ANALÄ°ZÄ° -->
            <section class="panel" id="panel-competitor">
                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">Rakip MaÄŸaza Analizi</div>
                                <div class="card-sub">Herhangi bir eBay maÄŸazasÄ±nÄ± gir â†’ mini AI tarzÄ± analiz.</div>
                            </div>
                            <span class="badge-soft blue">Mini AI</span>
                        </div>

                        <div class="form-row">
                            <div>
                                <label>Rakip eBay MaÄŸazasÄ±</label>
                                <input id="cs-store" placeholder="Ã–rn: best_home_store_uk">
                            </div>
                            <div>
                                <label>MaÄŸaza TÃ¼rÃ¼</label>
                                <select id="cs-type">
                                    <option>Genel Dropshipping</option>
                                    <option>Brand/MarkalÄ±</option>
                                    <option>NiÅŸ MaÄŸaza</option>
                                    <option>KarÄ±ÅŸÄ±k ÃœrÃ¼nler</option>
                                </select>
                            </div>
                        </div>

                        <button class="btn btn-primary" onclick="runCompetitor()">
                            ğŸ§  Rakip Analizini Ã‡alÄ±ÅŸtÄ±r
                        </button>

                        <div id="cs-result" style="margin-top:10px;"></div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">MaÄŸaza Gelir Tahmini</div>
                                <div class="card-sub">SatÄ±ÅŸ adedi + fiyat â†’ tahmini aylÄ±k ciro.</div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div>
                                <label>Tahmini ÃœrÃ¼n SayÄ±sÄ±</label>
                                <input id="rev-products" placeholder="Ã–rn: 120">
                            </div>
                            <div>
                                <label>GÃ¼nlÃ¼k Tahmini SatÄ±ÅŸ</label>
                                <input id="rev-daily" placeholder="Ã–rn: 4">
                            </div>
                            <div>
                                <label>Ortalama Fiyat (Â£)</label>
                                <input id="rev-price" placeholder="Ã–rn: 17">
                            </div>
                        </div>

                        <button class="btn btn-primary" onclick="runRevenueAI()">ğŸ’° Ciro Hesapla</button>

                        <div id="rev-result" style="margin-top:10px;"></div>
                    </div>
                </div>
            </section>

            <!-- SEO OPTIMIZER -->
            <section class="panel" id="panel-seo">
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">eBay SEO Optimizer</div>
                            <div class="card-sub">BaÅŸlÄ±ÄŸÄ±nÄ± gÃ¼Ã§lendir + basit SEO puanÄ± al.</div>
                        </div>
                        <span class="badge-soft blue">SEO AI</span>
                    </div>

                    <label>Mevcut BaÅŸlÄ±k</label>
                    <textarea id="seo-title" placeholder="Ã–rn: Stainless Steel Kitchen Rack Organizer"></textarea>

                    <button class="btn btn-primary" onclick="runSEO()">
                        ğŸ” SEO Analizi
                    </button>

                    <div id="seo-result" style="margin-top:10px;"></div>
                </div>
            </section>
        </div>
    </main>
</div>

<script>
    let AI_MODE = false;

    // NAV
    document.querySelectorAll('.nav-btn').forEach(btn => {
        const target = btn.getAttribute('data-target');
        if (!target) return;

        btn.addEventListener('click', () => {
            document.querySelectorAll('.nav-btn').forEach(b => {
                const t = b.getAttribute('data-target');
                if (t) b.classList.remove('active');
            });
            document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById(target).classList.add('active');
        });
    });

    function toMoney(n) {
        if (isNaN(n)) return "Â£0.00";
        return "Â£" + n.toFixed(2);
    }
    function clamp(v, min, max) {
        return Math.min(Math.max(v, min), max);
    }

    // DROP ANALYZER
    function runDropAnalyzer() {
        const title = (document.getElementById('da-title').value || "").trim();
        const cost = parseFloat(document.getElementById('da-cost').value) || 0;
        const sell = parseFloat(document.getElementById('da-sell').value) || 0;
        const sales = parseInt(document.getElementById('da-sales').value) || 0;
        const comp = document.getElementById('da-competition').value;

        if (!title || !cost || !sell) {
            alert("Kanka, en azÄ±ndan baÅŸlÄ±k, alÄ±ÅŸ ve satÄ±ÅŸ fiyatÄ±nÄ± girmen lazÄ±m :)");
            return;
        }

        const roughFees = sell * 0.15;
        const profit = sell - cost - roughFees;
        const margin = sell > 0 ? (profit / sell) * 100 : 0;
        const monthlyProfit = profit * sales;

        let score = 50;
        if (margin > 30) score += 20;
        else if (margin > 20) score += 10;
        else if (margin < 10) score -= 15;

        if (sales >= 30) score += 15;
        else if (sales >= 15) score += 7;
        else if (sales === 0) score -= 10;

        if (comp === "low") score += 15;
        if (comp === "high") score -= 10;

        if (title.toLowerCase().includes("set") || title.toLowerCase().includes("pack")) score += 5;

        score = clamp(score, 0, 100);

        document.getElementById('da-metrics').style.display = 'grid';
        document.getElementById('da-profit').textContent = toMoney(profit);
        document.getElementById('da-margin').textContent = margin.toFixed(1) + "%";
        document.getElementById('da-monthly').textContent = toMoney(monthlyProfit);
        document.getElementById('da-score').textContent = score.toFixed(0) + "/100";

        const profitTag = document.getElementById('da-profit-tag');
        const marginTag = document.getElementById('da-margin-tag');
        const scoreTag = document.getElementById('da-score-tag');
        profitTag.className = 'metric-pill';
        marginTag.className = 'metric-pill yellow';
        scoreTag.className = 'metric-pill';

        if (profit <= 0) {
            profitTag.classList.add('red');
            profitTag.textContent = "Zararda / BaÅŸabaÅŸ";
        } else if (profit < 3) {
            profitTag.classList.add('yellow');
            profitTag.textContent = "DÃ¼ÅŸÃ¼k kÃ¢r";
        } else {
            profitTag.classList.add('green');
            profitTag.textContent = "SaÄŸlÄ±klÄ± kÃ¢r";
        }

        if (margin < 10) marginTag.textContent = "ZayÄ±f marj";
        else if (margin < 20) marginTag.textContent = "Orta marj";
        else if (margin < 30) marginTag.textContent = "Ä°yi marj";
        else marginTag.textContent = "Ã‡ok iyi marj";

        if (score < 40) { scoreTag.classList.add('red'); scoreTag.textContent = "Riskli Ã¼rÃ¼n"; }
        else if (score < 70) { scoreTag.classList.add('yellow'); scoreTag.textContent = "Test edilebilir"; }
        else { scoreTag.classList.add('green'); scoreTag.textContent = "Girmeye deÄŸer"; }

        const lines = [];
        lines.push(`â€¢ ÃœrÃ¼n baÅŸlÄ±ÄŸÄ± â€œ${title.substring(0, 80)}${title.length > 80 ? "..." : ""}â€ olarak algÄ±landÄ±.`);
        if (profit <= 0) {
            lines.push("â€¢ Mevcut fiyat yapÄ±sÄ±nda Ã¼rÃ¼n ya zararda ya da baÅŸa baÅŸ seviyede.");
        } else if (margin < 15) {
            lines.push("â€¢ KÃ¢r var ama marj dÃ¼ÅŸÃ¼k. Sadece Ã§ok hÄ±zlÄ± dÃ¶nen Ã¼rÃ¼nse mantÄ±klÄ± olabilir.");
        } else if (margin < 30) {
            lines.push("â€¢ KÃ¢r marjÄ± dropshipping iÃ§in gayet kabul edilebilir seviyede.");
        } else {
            lines.push("â€¢ Marj Ã§ok gÃ¼zel. Rekabet uygunsa bu Ã¼rÃ¼n tatlÄ± duruyor.");
        }

        if (sales === 0) {
            lines.push("â€¢ AylÄ±k satÄ±ÅŸ adedi 0 girilmiÅŸ. HenÃ¼z data yoksa kÃ¼Ã§Ã¼k bÃ¼tÃ§eli test listelemesi dÃ¼ÅŸÃ¼nebilirsin.");
        } else if (sales < 15) {
            lines.push("â€¢ AylÄ±k satÄ±ÅŸ 15â€™in altÄ±nda. NiÅŸ Ã¼rÃ¼n olabilir; gÃ¶rsel ve baÅŸlÄ±k kritik.");
        } else {
            lines.push("â€¢ AylÄ±k satÄ±ÅŸ adedi fena deÄŸil. DoÄŸru fiyatla maÄŸazana eklemeye deÄŸer.");
        }

        if (comp === "high") {
            lines.push("â€¢ Rekabet yÃ¼ksek. Fark yaratmak iÃ§in daha iyi fotoÄŸraf + baÅŸlÄ±k + hÄ±zlÄ± kargo Ã¶nemli.");
        } else if (comp === "low") {
            lines.push("â€¢ Rekabet dÃ¼ÅŸÃ¼k. Talep varsa erken listeleme avantaj saÄŸlar.");
        }

        if (score >= 80) lines.push("â€¢ Genel skor Ã§ok iyi. Satarsa aynÄ± niÅŸte yan Ã¼rÃ¼nler ekleyebilirsin.");
        else if (score >= 60) lines.push("â€¢ Genel skor fena deÄŸil. KÃ¼Ã§Ã¼k bir test iÃ§in uygun.");
        else lines.push("â€¢ Genel skor zayÄ±f. Ã‡ok niÅŸ kitleye hitap ediyorsa Ã¶zel strateji gerekebilir.");

        const analysisBox = document.getElementById('da-analysis');
        const analysisText = document.getElementById('da-analysis-text');
        const tagRow = document.getElementById('da-tags');

        analysisBox.style.display = 'block';
        analysisText.textContent = lines.join("\n");

        tagRow.innerHTML = "";
        const makeTag = (text, cls) => {
            const span = document.createElement('span');
            span.className = 'tag ' + (cls || '');
            span.textContent = text;
            tagRow.appendChild(span);
        };

        if (margin >= 25) makeTag("YÃ¼ksek marj", "green");
        if (sales >= 20) makeTag("Fena olmayan talep", "green");
        if (comp === "high") makeTag("YoÄŸun rekabet", "red");
        if (profit <= 0) makeTag("Dikkat: zararda", "red");
        if (score >= 70) makeTag("Test etmeye deÄŸer", "green");
        if (score < 40) makeTag("Riskli Ã¼rÃ¼n", "red");
    }

    // AUTO CATEGORY
    function autoCategoryAI() {
        const title = (document.getElementById("da-title").value || "").toLowerCase().trim();
        if (!title) {
            alert("Kanka Ã¶nce Ã¼rÃ¼n baÅŸlÄ±ÄŸÄ±nÄ± yazalÄ±m :)");
            return;
        }

        let category = "General Home";
        if (title.includes("dog") || title.includes("cat") || title.includes("pet")) category = "Pet Supplies";
        if (title.includes("kitchen") || title.includes("rack") || title.includes("pan") || title.includes("knife")) category = "Home & Kitchen";
        if (title.includes("car") || title.includes("auto")) category = "Car Accessories";
        if (title.includes("phone") || title.includes("case")) category = "Mobile Accessories";
        if (title.includes("toy") || title.includes("kids")) category = "Toys & Kids";
        if (title.includes("beauty") || title.includes("face") || title.includes("skincare")) category = "Beauty & Personal";
        if (title.includes("lamp") || title.includes("light")) category = "Lighting";

        const words = title.split(" ").filter(Boolean);
        const text = `
â€¢ Tahmini kategori: **${category}**  
â€¢ ÃœrÃ¼n baÅŸlÄ±ÄŸÄ±ndan Ã§Ä±karÄ±lan anahtar kelimeler:
${words.map(t => "â€¢ " + t).join("\n")}
        `;

        document.getElementById("auto-cat-result").style.display = "block";
        document.getElementById("auto-cat-text").innerHTML = text;
    }

    // LINK MINI AI
    function runLinkMiniAI() {
        const urlRaw = (document.getElementById('la-link').value || "").trim();
        const container = document.getElementById('la-result');
        if (!urlRaw) {
            alert("Kanka Ã¶nce eBay linkini yapÄ±ÅŸtÄ±r :)");
            return;
        }

        let platform = "Bilinmiyor";
        let host = "";
        let path = "";
        try {
            const u = new URL(urlRaw);
            host = u.hostname || "";
            path = u.pathname || "";
        } catch (e) {
            // basit fallback
            host = urlRaw.split("/")[2] || "";
            path = urlRaw.split(host)[1] || "";
        }

        if (host.includes("ebay.co.uk")) platform = "eBay UK";
        else if (host.includes("ebay.com")) platform = "eBay US";
        else if (host.includes("ebay")) platform = "eBay";
        else platform = host || "Bilinmeyen platform";

        // slug'tan baÅŸlÄ±k tahmini
        let slug = path.split("/").pop() || "";
        slug = slug.split("?")[0];
        slug = decodeURIComponent(slug);
        slug = slug.replace(/_/g, " ").replace(/-/g, " ");
        const slugWords = slug.split(/\s+/).filter(w =>
            w && !/^\d+$/.test(w) && !["itm","dp","gp","pp"].includes(w.toLowerCase())
        );

        let titleGuess = slugWords.length ? slugWords.join(" ") : "Genel Ã¼rÃ¼n (slug Ã§Ã¶zÃ¼lemedi)";

        const lowTitle = titleGuess.toLowerCase();

        // kategori tahmini
        let category = "Genel";
        if (lowTitle.includes("dog") || lowTitle.includes("cat") || lowTitle.includes("pet"))
            category = "Pet Supplies";
        else if (lowTitle.includes("kitchen") || lowTitle.includes("rack") || lowTitle.includes("pan") || lowTitle.includes("storage"))
            category = "Home & Kitchen";
        else if (lowTitle.includes("car") || lowTitle.includes("auto"))
            category = "Car Accessories";
        else if (lowTitle.includes("phone") || lowTitle.includes("case") || lowTitle.includes("iphone") || lowTitle.includes("samsung"))
            category = "Mobile Accessories";
        else if (lowTitle.includes("toy") || lowTitle.includes("kids") || lowTitle.includes("baby"))
            category = "Toys & Kids";
        else if (lowTitle.includes("lamp") || lowTitle.includes("light") || lowTitle.includes("led"))
            category = "Lighting";
        else if (lowTitle.includes("gym") || lowTitle.includes("fitness") || lowTitle.includes("workout"))
            category = "Sports & Fitness";

        // tahmini fiyat
        let basePrice = 19.99;
        if (category === "Pet Supplies") basePrice = 14.99;
        if (category === "Home & Kitchen") basePrice = 17.99;
        if (category === "Car Accessories") basePrice = 16.99;
        if (category === "Mobile Accessories") basePrice = 9.99;
        if (category === "Toys & Kids") basePrice = 13.99;
        if (category === "Lighting") basePrice = 18.99;
        if (category === "Sports & Fitness") basePrice = 21.99;

        if (lowTitle.includes("set") || lowTitle.includes("pack")) basePrice += 3;
        if (lowTitle.includes("pro") || lowTitle.includes("premium")) basePrice += 4;

        const minPrice = basePrice - 3;
        const maxPrice = basePrice + 4;

        // tahmini tedarikÃ§i maliyeti ve marj
        const supplierCost = basePrice * 0.6;
        const marginPct = ((basePrice - supplierCost) / basePrice) * 100;

        // tahmini trend + skor
        let trendScore = 55;
        if (category === "Pet Supplies" || category === "Home & Kitchen") trendScore += 10;
        if (category === "Sports & Fitness") trendScore += 8;
        if (category === "Mobile Accessories") trendScore -= 5;

        if (lowTitle.includes("2024") || lowTitle.includes("2025") || lowTitle.includes("new")) trendScore += 5;
        trendScore = clamp(trendScore, 20, 95);

        // rekabet tahmini
        let competition = "Orta";
        if (category === "Mobile Accessories") competition = "YÃ¼ksek";
        else if (category === "Pet Supplies" || category === "Home & Kitchen") competition = "Orta";
        else competition = "Orta-YÃ¼ksek";

        // drop skoru
        let dropScore = trendScore;
        if (marginPct > 30) dropScore += 8;
        else if (marginPct < 20) dropScore -= 5;
        if (competition === "YÃ¼ksek") dropScore -= 7;
        dropScore = clamp(dropScore, 10, 98);

        let risk = "Orta";
        if (dropScore >= 75) risk = "DÃ¼ÅŸÃ¼k";
        else if (dropScore <= 45) risk = "YÃ¼ksek";

        const lines = [];
        lines.push(`â€¢ Platform: ${platform}`);
        lines.push(`â€¢ Tahmini baÅŸlÄ±k: ${titleGuess}`);
        lines.push(`â€¢ Tahmini kategori: ${category}`);
        lines.push(`â€¢ Tahmini satÄ±ÅŸ fiyat aralÄ±ÄŸÄ±: Â£${minPrice.toFixed(2)} â€“ Â£${maxPrice.toFixed(2)}`);
        lines.push(`â€¢ Tahmini tedarikÃ§i maliyeti: ~Â£${supplierCost.toFixed(2)} (varsayÄ±lan dropship senaryosu)`);
        lines.push(`â€¢ Tahmini kÃ¢r marjÄ±: ~${marginPct.toFixed(1)}%`);
        lines.push(`â€¢ Tahmini trend skoru: ${trendScore.toFixed(0)}/100`);
        lines.push(`â€¢ Tahmini drop skoru: ${dropScore.toFixed(0)}/100 (${risk} risk)`);
        lines.push("");
        if (dropScore >= 75) {
            lines.push("Yorum: Bu URLâ€™den Ã§Ä±kan Ã¼rÃ¼n, niÅŸ + fiyat olarak gayet mantÄ±klÄ± gÃ¶rÃ¼nÃ¼yor. AynÄ± kategoriye birkaÃ§ Ã¼rÃ¼n daha ekleyip koleksiyon tarzÄ± bir maÄŸaza oluÅŸturabilirsin.");
        } else if (dropScore >= 55) {
            lines.push("Yorum: Ä°lk test iÃ§in fena deÄŸil. FiyatÄ±, gÃ¶rseli ve baÅŸlÄ±ÄŸÄ± iyi optimize edersen, dÃ¼ÅŸÃ¼k bÃ¼tÃ§eli test iÃ§in uygun.");
        } else if (dropScore >= 40) {
            lines.push("Yorum: NiÅŸ biraz riskli ya da rekabetli gÃ¶rÃ¼nÃ¼yor. Bu Ã¼rÃ¼nÃ¼ sadece baÅŸka gÃ¼Ã§lÃ¼ Ã¼rÃ¼nlerin yanÄ±nda â€œek Ã¼rÃ¼nâ€ olarak kullanmak mantÄ±klÄ± olabilir.");
        } else {
            lines.push("Yorum: URLâ€™den gelen sinyaller zayÄ±f. Daha saÄŸlÄ±klÄ± kategoriler (Pet, Home & Kitchen vb.) ile baÅŸlaman daha mantÄ±klÄ± olabilir.");
        }

        let tagsHtml = "";
        const pushTag = (txt, cls) => {
            tagsHtml += `<span class="tag ${cls}">${txt}</span>`;
        };

        if (category === "Pet Supplies") pushTag("Pet niÅŸi", "green");
        if (category === "Home & Kitchen") pushTag("Mutfak / Ev", "green");
        if (category === "Mobile Accessories") pushTag("YoÄŸun rekabet", "red");
        if (dropScore >= 75) pushTag("Girmeye deÄŸer (tahmini)", "green");
        if (dropScore < 45) pushTag("Riskli Ã¼rÃ¼n", "red");
        if (trendScore >= 70) pushTag("Trend gÃ¼Ã§lÃ¼", "green");

        container.innerHTML = `
            <div class="analysis-box">
                <div class="analysis-header">Mini AI SonuÃ§ Ã–zeti</div>
                ${lines.join("\n")}
                <div class="tag-row" style="margin-top:6px;">
                    ${tagsHtml || ""}
                </div>
            </div>
        `;
    }

    // PRODUCT FINDER
    function runProductFinder() {
        const keyword = (document.getElementById('pf-keyword').value || "").trim().toLowerCase();
        const min = parseFloat(document.getElementById('pf-min').value) || 0;
        const max = parseFloat(document.getElementById('pf-max').value) || 0;
        const container = document.getElementById('pf-results');

        if (!keyword) {
            alert("Kanka, en azÄ±ndan bir anahtar kelime / kategori yaz :)");
            return;
        }

        let base = keyword;
        if (base.length > 20) base = base.slice(0, 20);

        const templates = [
            base + " starter set",
            base + " pro kit",
            "premium " + base + " bundle",
            "compact " + base + " solution",
            "multi-use " + base + " pack"
        ];

        let priceRangeText = "";
        if (min && max) priceRangeText = `Hedef fiyat aralÄ±ÄŸÄ±: Â£${min} - Â£${max}`;
        else if (min) priceRangeText = `Minimum hedef fiyat: Â£${min}+`;
        else if (max) priceRangeText = `Maksimum hedef fiyat: Â£0 - Â£${max}`;
        else priceRangeText = "Fiyat aralÄ±ÄŸÄ± belirtilmedi, genel fikir Ã¼retiliyor.";

        const hints = [];
        if (keyword.includes("pet")) hints.push("Pet Ã¼rÃ¼nlerinde set halinde satÄ±lan Ã¼rÃ¼nler genelde daha iyi kÃ¢r bÄ±rakÄ±r.");
        if (keyword.includes("kitchen")) hints.push("Mutfak tarafÄ±nda plastik deÄŸil paslanmaz Ã§elik ve bambu Ã¼rÃ¼nler daha premium gÃ¶rÃ¼nÃ¼r.");
        if (keyword.includes("car")) hints.push("Araba aksesuarlarÄ±nda gÃ¶rsel ve kullanÄ±m senaryosu fotoÄŸraflarÄ± Ã§ok Ã¶nemlidir.");
        if (!hints.length) {
            hints.push("Bu niÅŸte niÅŸ ama sorun Ã§Ã¶zen Ã¼rÃ¼nlere odaklanÄ±rsan rekabetten kaÃ§Ä±nabilirsin.");
        }

        let html = `
            <div class="card" style="margin-top:8px;">
                <div class="card-header">
                    <div>
                        <div class="card-title">Ã–nerilen ÃœrÃ¼n Fikirleri</div>
                        <div class="card-sub">${priceRangeText}</div>
                    </div>
                </div>
                <ul class="list-compact">
        `;

        templates.forEach((t, idx) => {
            const basePrice = (min && max) ? (min + max) / 2 : (min || max || 19.99);
            const price = basePrice + (idx - 2) * 2;
            const score = clamp(65 + (idx - 2) * 5, 40, 90);

            html += `
                <li>
                    <strong>${t}</strong>  
                    â€¢ Tahmini satÄ±ÅŸ fiyatÄ±: Â£${price.toFixed(2)}  
                    â€¢ Drop potansiyel skoru: ${score}/100
                </li>
            `;
        });

        html += `
                </ul>
                <div class="analysis-box" style="margin-top:8px;">
                    <div class="analysis-header">Mini Yorum</div>
                    Bu fikirler, ${keyword} niÅŸi iÃ§in mantÄ±klÄ± olabilecek Ã¼rÃ¼n tiplerini temsil eder. 
                    GerÃ§ek Ã¼rÃ¼nÃ¼ seÃ§erken:
                    â€¢ Fazla parÃ§alÄ±, kargo derdi olan Ã¼rÃ¼nlerden kaÃ§Ä±n.  
                    â€¢ UK deposu ve NET fatura imkÃ¢nÄ± olan tedarikÃ§iyi tercih et.  
                    â€¢ GÃ¶rsel ve baÅŸlÄ±k, rakiplerinden daha temiz ve net olmalÄ±.
                    <br><br>
                    Ä°pucu: 
                    ${hints[0]}
                </div>
            </div>
        `;

        container.innerHTML = html;
    }

    // PROFIT CALC
    function runProfitCalc() {
        const cost = parseFloat(document.getElementById('pc-cost').value) || 0;
        const sell = parseFloat(document.getElementById('pc-sell').value) || 0;
        const ship = parseFloat(document.getElementById('pc-ship').value) || 0;
        const ebayP = parseFloat(document.getElementById('pc-ebay').value) || 0;
        const payP = parseFloat(document.getElementById('pc-pay').value) || 0;

        if (!cost || !sell) {
            alert("Kanka, en azÄ±ndan alÄ±ÅŸ ve satÄ±ÅŸ fiyatÄ±nÄ± girmen ÅŸart :)");
            return;
        }

        const ebayFee = sell * (ebayP / 100);
        const payFee = sell * (payP / 100);
        const totalCost = cost + ship + ebayFee + payFee;
        const profit = sell - totalCost;
        const margin = sell > 0 ? (profit / sell) * 100 : 0;

        document.getElementById('pc-metrics').style.display = 'grid';
        document.getElementById('pc-total-cost').textContent = toMoney(totalCost);
        document.getElementById('pc-profit').textContent = toMoney(profit);
        document.getElementById('pc-margin').textContent = margin.toFixed(1) + "%";

        const profitTag = document.getElementById('pc-profit-tag');
        const marginTag = document.getElementById('pc-margin-tag');
        profitTag.className = 'metric-pill';
        marginTag.className = 'metric-pill';

        const analysisLines = [];

        if (profit <= 0) {
            profitTag.classList.add('red');
            profitTag.textContent = "Zararda / baÅŸa baÅŸ";
            analysisLines.push("â€¢ Mevcut yapÄ±da Ã¼rÃ¼n ya zararda ya da baÅŸa baÅŸ. FiyatÄ± yÃ¼kseltmen veya maliyetleri dÃ¼ÅŸÃ¼rmen gerekiyor.");
        } else if (margin < 10) {
            profitTag.classList.add('yellow');
            profitTag.textContent = "Ã‡ok dÃ¼ÅŸÃ¼k kÃ¢r";
            analysisLines.push("â€¢ KÃ¢r var ama Ã§ok dÃ¼ÅŸÃ¼k. Sadece hacmi Ã§ok yÃ¼ksek Ã¼rÃ¼nse anlamlÄ± olabilir.");
        } else if (margin < 25) {
            profitTag.classList.add('yellow');
            profitTag.textContent = "Orta kÃ¢r";
            analysisLines.push("â€¢ KÃ¢r seviyesi fena deÄŸil. Test amaÃ§lÄ± listelemek iÃ§in uygun.");
        } else {
            profitTag.classList.add('green');
            profitTag.textContent = "SaÄŸlam kÃ¢r";
            analysisLines.push("â€¢ KÃ¢r seviyesi dropshipping iÃ§in gayet gÃ¼zel.");
        }

        if (margin < 10) {
            marginTag.classList.add('red');
            marginTag.textContent = "ZayÄ±f marj";
        } else if (margin < 20) {
            marginTag.classList.add('yellow');
            marginTag.textContent = "Orta marj";
        } else if (margin < 30) {
            marginTag.classList.add('yellow');
            marginTag.textContent = "Ä°yi marj";
        } else {
            marginTag.classList.add('green');
            marginTag.textContent = "Ã‡ok iyi marj";
        }

        analysisLines.push(`â€¢ Toplam maliyet (kargo + ebay + Ã¶deme kesintisi dahil) ${toMoney(totalCost)} civarÄ±nda.`);
        analysisLines.push(`â€¢ Net kÃ¢r adet baÅŸÄ±na ${toMoney(profit)} (${margin.toFixed(1)}% marj).`);

        if (ship === 0) {
            analysisLines.push("â€¢ Kargo maliyetini 0 girmiÅŸsin. GerÃ§ekten free shipping ise fiyatÄ±n iÃ§inde bunu hesaba kattÄ±ÄŸÄ±ndan emin ol.");
        }

        document.getElementById('pc-analysis').style.display = 'block';
        document.getElementById('pc-analysis-text').textContent = analysisLines.join("\n");
    }

    // TREND EXPLORER
    function runTrendExplorer() {
        const kw = (document.getElementById('te-keyword').value || "").trim().toLowerCase();
        const horizon = parseInt(document.getElementById('te-horizon').value) || 30;

        if (!kw) {
            alert("Kanka, kategori / anahtar kelime yazmadan trend okuyamam :)");
            return;
        }

        let baseScore = 50;
        if (kw.includes("pet")) baseScore += 15;
        if (kw.includes("kitchen")) baseScore += 10;
        if (kw.includes("home")) baseScore += 8;
        if (kw.includes("gym") || kw.includes("fitness")) baseScore += 10;
        if (kw.includes("phone") || kw.includes("case")) baseScore -= 5;

        if (horizon === 30) baseScore += 5;
        if (horizon === 365) baseScore -= 3;

        const lenAdj = clamp((kw.length - 8) / 2, -10, 10);
        baseScore += lenAdj;

        const score = clamp(baseScore, 10, 95);
        const risk = score < 40 ? "YÃ¼ksek" : (score < 70 ? "Orta" : "DÃ¼ÅŸÃ¼k");

        document.getElementById('te-metrics').style.display = 'grid';
        document.getElementById('te-score').textContent = score.toFixed(0) + "/100";
        document.getElementById('te-risk').textContent = risk;

        const scoreTag = document.getElementById('te-score-tag');
        scoreTag.className = 'metric-pill';
        if (score < 40) { scoreTag.classList.add('red'); scoreTag.textContent = "ZayÄ±f trend"; }
        else if (score < 70) { scoreTag.classList.add('yellow'); scoreTag.textContent = "Orta trend"; }
        else { scoreTag.classList.add('green'); scoreTag.textContent = "GÃ¼Ã§lÃ¼ trend"; }

        document.getElementById('te-bar').style.width = score + "%";

        const lines = [];
        lines.push(`â€¢ â€œ${kw}â€ iÃ§in tahmini trend skoru: ${score.toFixed(0)}/100 (${risk} risk).`);

        if (score < 40) lines.push("â€¢ Kategori zayÄ±f gÃ¶rÃ¼nÃ¼yor. Ã‡ok spesifik bir kitle yoksa uÄŸraÅŸmaya deÄŸmeyebilir.");
        else if (score < 70) lines.push("â€¢ Fena deÄŸil. DoÄŸru Ã¼rÃ¼n ve fiyatla test edilebilir.");
        else lines.push("â€¢ GÃ¼Ã§lÃ¼ trend! Burada niÅŸleÅŸip koleksiyon oluÅŸturman mantÄ±klÄ±.");

        const tags = [];
        if (kw.includes("pet")) tags.push(["Pet niÅŸi", "green"]);
        if (kw.includes("kitchen")) tags.push(["Mutfak niÅŸi", "green"]);
        if (kw.includes("car")) tags.push(["AraÃ§ aksesuarÄ±", "yellow"]);
        if (kw.includes("phone")) tags.push(["YoÄŸun rekabet", "red"]);
        if (score >= 70) tags.push(["Trend gÃ¼Ã§lÃ¼", "green"]);
        if (risk === "YÃ¼ksek") tags.push(["Riskli niÅŸ", "red"]);

        document.getElementById('te-analysis').style.display = 'block';
        document.getElementById('te-analysis-text').textContent = lines.join("\n");

        const tagRow = document.getElementById('te-tags');
        tagRow.innerHTML = "";
        tags.forEach(([text, cls]) => {
            const span = document.createElement('span');
            span.className = 'tag ' + cls;
            span.textContent = text;
            tagRow.appendChild(span);
        });
    }

    // RAKÄ°P MAÄAZA
    function runCompetitor() {
        const store = (document.getElementById("cs-store").value || "").trim();
        const type = document.getElementById("cs-type").value;

        if (!store) {
            alert("Kanka rakip maÄŸaza adÄ±nÄ± girmeden analiz yapamam :)");
            return;
        }

        let score = 60;
        if (type === "Genel Dropshipping") score += 5;
        if (type === "NiÅŸ MaÄŸaza") score += 15;
        if (type === "Brand/MarkalÄ±") score += 10;

        let risk = "Orta";
        if (score > 80) risk = "DÃ¼ÅŸÃ¼k";
        if (score < 50) risk = "YÃ¼ksek";

        const analysis = `
        <div class="analysis-box">
            <div class="analysis-header">MaÄŸaza Ä°ncelemesi</div>
            â€¢ Rakip: ${store}  
            â€¢ MaÄŸaza tÃ¼rÃ¼: ${type}  
            â€¢ Tahmini rekabet skoru: ${score}/100 (${risk} risk)
            <br><br>
            Mini Yorum:
            â€¢ Bu maÄŸaza muhtemelen haftada 3â€“5 Ã¼rÃ¼n ekleyen aktif bir maÄŸaza.  
            â€¢ SatÄ±ÅŸlarÄ± 15â€“60 adet/ay aralÄ±ÄŸÄ±nda olabilir.  
            â€¢ Fiyat ve gÃ¶rseller zayÄ±fsa sen rahatÃ§a geÃ§ebilirsin.
        </div>
        `;
        document.getElementById("cs-result").innerHTML = analysis;
    }

    // GELÄ°R TAHMÄ°NÄ°
    function runRevenueAI() {
        const p = parseInt(document.getElementById("rev-products").value) || 0;
        const d = parseInt(document.getElementById("rev-daily").value) || 0;
        const price = parseFloat(document.getElementById("rev-price").value) || 0;

        if (!p || !d || !price) {
            alert("Kanka 3 kutuyu da doldur ki ciroyu doÄŸru hesaplayayÄ±m :)");
            return;
        }

        const monthlySales = d * 30;
        const revenue = monthlySales * price;

        const result = `
        <div class="analysis-box">
            <div class="analysis-header">Ciro Analizi</div>
            â€¢ Tahmini Ã¼rÃ¼n sayÄ±sÄ±: ${p}  
            â€¢ GÃ¼nlÃ¼k satÄ±ÅŸ: ${d}  
            â€¢ AylÄ±k satÄ±ÅŸ: ${monthlySales}  
            â€¢ Ortalama fiyat: Â£${price.toFixed(2)}  
            <br>
            <strong>â†’ Tahmini AylÄ±k Ciro: Â£${revenue.toFixed(2)}</strong>
            <br><br>
            Mini Yorum:  
            â€¢ Bu maÄŸaza muhtemelen aktif satÄ±cÄ±dÄ±r.  
            â€¢ GÃ¼nlÃ¼k satÄ±ÅŸ 8+ olsaydÄ±, aylÄ±k ciro Ã§ok daha gÃ¼Ã§lÃ¼ gÃ¶rÃ¼nÃ¼rdÃ¼.
        </div>
        `;
        document.getElementById("rev-result").innerHTML = result;
    }

    // SEO
    function runSEO() {
        const title = (document.getElementById("seo-title").value || "").trim();
        if (!title) {
            alert("Kanka Ã¶nce bir baÅŸlÄ±k yazalÄ±m :)");
            return;
        }

        const words = title.toLowerCase().split(" ").filter(Boolean);
        let score = 60;
        if (words.length < 5) score -= 10;
        if (words.length > 12) score -= 5;
        if (title.toLowerCase().includes("stainless") || title.toLowerCase().includes("premium")) score += 10;
        if (title.toLowerCase().includes("organizer") || title.toLowerCase().includes("rack")) score += 7;

        const recommended = [
            "2025 New",
            "High Quality",
            "Fast UK Shipping",
            "Trending",
            "Limited Stock",
            "Multi Purpose"
        ];

        const result = `
        <div class="analysis-box">
            <div class="analysis-header">SEO Skoru</div>
            â€¢ BaÅŸlÄ±k: ${title}  
            â€¢ SEO PuanÄ±: ${score}/100  
            <br><br>
            <strong>Ã–nerilen Kelimeler:</strong>
            <div class="tag-row">
                ${recommended.map(k => `<span class="tag green">${k}</span>`).join("")}
            </div>
            <br>
            <strong>Optimize BaÅŸlÄ±k Ã–rneÄŸi:</strong><br>
            ${title} | Fast UK Shipping | 2025 Trending
        </div>
        `;
        document.getElementById("seo-result").innerHTML = result;
    }

    // AI MODE TOGGLE (ileride OpenAI iÃ§in)
    function toggleAI() {
        AI_MODE = !AI_MODE;
        const ind = document.getElementById("ai-indicator");
        ind.textContent = AI_MODE ? "AÃ§Ä±k" : "KapalÄ±";
        ind.style.borderColor = AI_MODE ? "#22c55e" : "rgba(148,163,184,0.4)";
        alert("AI Mode: " + (AI_MODE ? "AÃ§Ä±k (ileride API key ile kullanÄ±lÄ±r)" : "KapalÄ± (sadece local motor aktif)"));
    }

    /*
    // Ä°leride gerÃ§ek OpenAI entegrasyonu iÃ§in ÅŸablon:
    async function askOpenAI(prompt) {
        if (!AI_MODE) return "AI modu kapalÄ±, local motor kullanÄ±lÄ±yor.";
        const apiKey = "BURAYA_KENDÄ°_API KEYÄ°NÄ° YAZ";
        const res = await fetch("https://api.openai.com/v1/chat/completions", {
            method: "POST",
            headers: {
                "Authorization": "Bearer " + apiKey,
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                model: "gpt-4.1-mini",
                messages: [
                    { role: "system", content: "You are an expert eBay dropshipping analyst." },
                    { role: "user", content: prompt }
                ]
            })
        });
        const data = await res.json();
        return data.choices[0].message.content;
    }
    */
</script>
</body>
</html>
